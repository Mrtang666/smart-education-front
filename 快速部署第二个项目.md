# å¿«é€Ÿéƒ¨ç½²ç¬¬äºŒä¸ªå‰ç«¯é¡¹ç›®

## ğŸš€ ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

### Windowsç”¨æˆ·
```powershell
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
.\deploy-second-project.ps1 -ProjectName "ä½ çš„é¡¹ç›®å" -LocalDistPath "D:\path\to\your\project\dist"
```

### Linux/Macç”¨æˆ·
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy-second-project.sh

# ä¿®æ”¹è„šæœ¬ä¸­çš„é…ç½®å˜é‡åæ‰§è¡Œ
./deploy-second-project.sh
```

---

## ğŸ“‹ æ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤

### 1. æœåŠ¡å™¨å‡†å¤‡
```bash
# SSHè¿æ¥åˆ°æœåŠ¡å™¨
ssh root@118.89.136.119

# åˆ›å»ºç›®å½•
sudo mkdir -p /projects/frontend2/dist
sudo mkdir -p /projects/nginx/conf.d
sudo chown -R www-data:www-data /projects/frontend2
sudo chmod -R 755 /projects/frontend2
```

### 2. é‡æ–°é…ç½®nginxå®¹å™¨
```bash
# åœæ­¢ç°æœ‰å®¹å™¨
docker stop nginx-frontend
docker rm nginx-frontend

# åˆ›å»ºå¤šé¡¹ç›®nginxå®¹å™¨
docker run -d \
  --name nginx-multi-frontend \
  -p 8080:80 \
  -p 8081:8081 \
  -v /projects/frontend/dist:/usr/share/nginx/html/project1 \
  -v /projects/frontend2/dist:/usr/share/nginx/html/project2 \
  -v /projects/nginx/conf.d:/etc/nginx/conf.d \
  nginx:latest
```

### 3. ä¸Šä¼ é¡¹ç›®æ–‡ä»¶
```powershell
# Windows PowerShellï¼ˆåœ¨æœ¬åœ°æ‰§è¡Œï¼‰
scp -r "D:\path\to\your\second-project\dist\*" root@118.89.136.119:/projects/frontend2/dist/
```

### 4. è®¿é—®é¡¹ç›®
- ç¬¬ä¸€ä¸ªé¡¹ç›®ï¼šhttp://118.89.136.119:8080
- ç¬¬äºŒä¸ªé¡¹ç›®ï¼šhttp://118.89.136.119:8081

---

## ğŸ”„ æ—¥å¸¸æ›´æ–°æµç¨‹

### æ›´æ–°ç¬¬ä¸€ä¸ªé¡¹ç›®ï¼ˆsmart-education-frontï¼‰
```powershell
# æœ¬åœ°æ„å»º
npm run build

# ä¸Šä¼ 
scp -r "D:\git depository\smart-education-front\dist\*" root@118.89.136.119:/projects/frontend/dist/
```

### æ›´æ–°ç¬¬äºŒä¸ªé¡¹ç›®
```powershell
# æœ¬åœ°æ„å»º
npm run build

# ä¸Šä¼ 
scp -r "D:\path\to\your\second-project\dist\*" root@118.89.136.119:/projects/frontend2/dist/
```

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### æŸ¥çœ‹å®¹å™¨çŠ¶æ€
```bash
docker ps | grep nginx
```

### æŸ¥çœ‹nginxæ—¥å¿—
```bash
docker logs nginx-multi-frontend
```

### é‡å¯nginx
```bash
docker restart nginx-multi-frontend
```

### è¿›å…¥å®¹å™¨è°ƒè¯•
```bash
docker exec -it nginx-multi-frontend /bin/bash
```

### æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä¸Šä¼ æˆåŠŸ
```bash
# æ£€æŸ¥ç¬¬ä¸€ä¸ªé¡¹ç›®
ls -la /projects/frontend/dist/

# æ£€æŸ¥ç¬¬äºŒä¸ªé¡¹ç›®
ls -la /projects/frontend2/dist/
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç«¯å£å†²çª**ï¼šç¡®ä¿8080å’Œ8081ç«¯å£æœªè¢«å ç”¨
2. **æ–‡ä»¶æƒé™**ï¼šä¸Šä¼ åæ£€æŸ¥æ–‡ä»¶æƒé™æ˜¯å¦æ­£ç¡®
3. **ç¼“å­˜é—®é¢˜**ï¼šå¦‚æœé¡µé¢æœªæ›´æ–°ï¼Œå°è¯•å¼ºåˆ¶åˆ·æ–°ï¼ˆCtrl+F5ï¼‰
4. **è·¯å¾„é…ç½®**ï¼šç¡®ä¿æœ¬åœ°é¡¹ç›®è·¯å¾„æ­£ç¡®
5. **ç½‘ç»œè¿æ¥**ï¼šç¡®ä¿èƒ½æ­£å¸¸SSHè¿æ¥åˆ°æœåŠ¡å™¨

---

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šå®¹å™¨å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
docker logs nginx-multi-frontend

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep :8080
netstat -tlnp | grep :8081
```

### é—®é¢˜2ï¼šé¡µé¢404é”™è¯¯
```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
docker exec nginx-multi-frontend ls -la /usr/share/nginx/html/project1/
docker exec nginx-multi-frontend ls -la /usr/share/nginx/html/project2/

# æ£€æŸ¥nginxé…ç½®
docker exec nginx-multi-frontend nginx -t
```

### é—®é¢˜3ï¼šæ–‡ä»¶ä¸Šä¼ å¤±è´¥
```bash
# æ£€æŸ¥ç›®å½•æƒé™
ls -la /projects/

# ä¿®å¤æƒé™
sudo chown -R www-data:www-data /projects/frontend2
sudo chmod -R 755 /projects/frontend2
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

éƒ¨ç½²å®Œæˆåçš„æœåŠ¡å™¨ç›®å½•ç»“æ„ï¼š
```
/projects/
â”œâ”€â”€ frontend/          # ç¬¬ä¸€ä¸ªé¡¹ç›®
â”‚   â””â”€â”€ dist/
â”‚       â”œâ”€â”€ index.html
â”‚       â”œâ”€â”€ css/
â”‚       â””â”€â”€ js/
â”œâ”€â”€ frontend2/         # ç¬¬äºŒä¸ªé¡¹ç›®
â”‚   â””â”€â”€ dist/
â”‚       â”œâ”€â”€ index.html
â”‚       â”œâ”€â”€ css/
â”‚       â””â”€â”€ js/
â””â”€â”€ nginx/
    â””â”€â”€ conf.d/
        â”œâ”€â”€ project1.conf
        â””â”€â”€ project2.conf
```